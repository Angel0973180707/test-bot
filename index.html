<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹¸ç¦æ™ºå¤šæ˜Ÿ - API é›²ç«¯ä¸­æ§å°æ¥ç‰ˆ</title>
    <style>
        :root { --main-pink: #ffb6c1; --soft-bg: #fff5f7; --text-gray: #555; --deep-pink: #d63384; }
        body { font-family: "Microsoft JhengHei", sans-serif; background: var(--soft-bg); padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        /* æ™ºå¤šæ˜Ÿä¸»å¤–æ¡† */
        .mastermind-container { width: 100%; max-width: 500px; background: white; padding: 25px; border-radius: 25px; box-shadow: 0 15px 35px rgba(255,182,193,0.3); position: relative; overflow: hidden; }
        
        h2 { color: var(--deep-pink); text-align: center; margin-bottom: 5px; }
        .subtitle { text-align: center; font-size: 0.85em; color: #888; margin-bottom: 20px; }

        /* è¼¸å…¥å€ */
        .search-box { display: flex; gap: 10px; margin-bottom: 25px; }
        input { flex: 1; padding: 15px; border: 2px solid var(--main-pink); border-radius: 15px; outline: none; font-size: 16px; }
        .search-btn { background: var(--main-pink); border: none; padding: 0 20px; border-radius: 15px; color: white; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .search-btn:hover { background: var(--deep-pink); }

        /* å›æ‡‰å€ */
        #response-panel { display: none; animation: fadeIn 0.5s ease; }
        .angel-talk { background: #fff0f3; padding: 20px; border-radius: 15px; border-left: 6px solid var(--main-pink); line-height: 1.7; color: #444; margin-bottom: 20px; position: relative; }
        
        /* åŠŸèƒ½æŒ‰éˆ• */
        .action-group { display: flex; flex-direction: column; gap: 12px; }
        .btn { padding: 15px; border-radius: 12px; text-decoration: none; text-align: center; font-weight: bold; cursor: pointer; transition: 0.3s; display: block; border: none; }
        .btn-sutra { background: #ffecf0; color: var(--deep-pink); border: 2px dashed var(--deep-pink); }
        .btn-nav { background: white; border: 2px solid var(--main-pink); color: var(--deep-pink); }
        .btn-tool { background: var(--deep-pink); color: white; box-shadow: 0 4px 10px rgba(214,51,132,0.3); display: none; }

        /* å¹¸ç¦ä¿¡å°å‹•ç•« */
        #envelope-anim { display: none; text-align: center; margin: 20px 0; animation: bounce 1s infinite; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    </style>
</head>
<body>

    <div class="mastermind-container">
        <h2>ğŸ‘¼ å¹¸ç¦æ™ºå¤šæ˜Ÿ</h2>
        <div class="subtitle">æ‚¨çš„é›²ç«¯æ•™é¤Šç®¡å®¶ï¼ˆAPI ä¸­æ§æ¨¡å¼ï¼‰</div>
        
        <div class="search-box">
            <input type="text" id="userInput" placeholder="è¼¸å…¥æ‚¨çš„å¿ƒæƒ…æˆ–å­©å­ç‹€æ³...">
            <button class="search-btn" onclick="triggerMastermind()">è©¢å•</button>
        </div>

        <div id="response-panel">
            <div class="angel-talk" id="angelVoice"></div>
            
            <div id="envelope-anim">âœ‰ï¸ ğŸŒ¸ å°å¤©ä½¿æ­£åœ¨ç‚ºæ‚¨æº–å‚™å¹¸ç¦å·¥å…·...</div>

            <div class="action-group">
                <button class="btn btn-sutra" onclick="goToSutra()">ğŸ“– å›é¦–é è®€ï¼šæ•™é¤Šå¹¸ç¦ç¶“</button>
                <button class="btn btn-nav" id="navBtn" onclick="goToGallery()"></button>
                <button class="btn btn-tool" id="toolBtn" onclick="downloadTool()">ğŸ“¥ é ˜å–ï¼šå°ˆå±¬é™ªä¼´å·¥å…· (PWA ä¸‹è¼‰)</button>
            </div>
        </div>
    </div>

<script>
    /* ----------------------------------------------------------------
       1. API æ¥è»Œæ¨¡æ“¬ï¼šé€™æ®µè³‡æ–™æœªä¾†æœƒå¾ Google Sheets API å¯¦æ™‚æŠ“å–
       ---------------------------------------------------------------- */
    const mockSheetAPI = [
        {
            keywords: "æ„›ç”Ÿæ°£, è„¾æ°£, æš´æ€’, å¼å«, å¤±æ§, ç™¼ç«, å¿ä¸ä½ç½µäºº, ç½µå°å­©, è„¾æ°£å¤§, äº‚ç™¼è„¾æ°£",
            response: "å¤©ä½¿ç¬‘é•·æ‡‚ä½ çš„æ‡Šæƒ±ã€‚è®“æˆ‘å€‘å…ˆå›é¦–é ï¼Œé»é–‹ã€é¤¨è—ã€‘è®€è®€ã€Šæ•™é¤Šå¹¸ç¦ç¶“ã€‹ï¼Œç©©å®šå¤§è…¦çš„ç†æ€§ç©ºé–“ï¼›å†é€²åˆ°ã€Œå¿ƒè…¦å±•å»³ã€çœ‹è¦‹å¤±æ§çš„çœŸç›¸ã€‚",
            contentID: "è…¦-05-L", 
            pageName: "1. å¿ƒè…¦å±•å»³",
            toolURL: "" 
        },
        {
            keywords: "å­©å­æ…¢, æ‹–å»¶, ä¸ä¸»å‹•, å¯«åŠŸèª², è¦äººå‚¬, ç£¨è¹­, è¬›ä¸è½, å¾ˆçš®, æ‡¶æ•£, å‹•ä½œæ…¢",
            response: "æ¯å€‹å­©å­éƒ½æœ‰è‡ªå·±çš„èŠ±æœŸï¼Œè®“æˆ‘å€‘èµ°é€²ã€Œç”Ÿå‘½åŠ‡å ´ã€çœ‹è¦‹æˆé•·çš„ç¯€å¥ã€‚ç¬‘é•·ä¹Ÿç‚ºæ‚¨æº–å‚™äº†ã€è‡ªä¸»è¨ˆæ™‚å·¥å…·ã€‘ï¼Œé™ªå­©å­ç·´ç¿’æŒæ§æ™‚é–“ã€‚",
            contentID: "å¹¸ç¦æ•™é¤Šå¾Œè¨˜", 
            pageName: "2. ç”Ÿå‘½åŠ‡å ´",
            toolURL: "https://example.com/timer-tool.pdf" // æ¨¡æ“¬ PDF é€£çµ
        },
        {
            keywords: "å¾Œæ‚”, è‡ªè²¬, æˆ‘éŒ¯äº†, æˆ‘ä¸é…, å¤±æ•—, ç½ªæƒ¡æ„Ÿ, å°ä¸èµ·å­©å­",
            response: "è®“æˆ‘å€‘æ”¾ä¸‹å¾—å¤±ã€‚è«‹å…ˆå›é¦–é é»é–‹ã€é¤¨è—ã€‘ï¼Œè®€è®€ã€Šæ•™é¤Šå¹¸ç¦ç¶“ã€‹ä¸­ã€Œèˆ‡å…¶è¦æ±‚ï¼Œä¸å¦‚æ„Ÿæ©ã€çš„è½‰å¿µå¿ƒæ³•ï¼›å†é€²ã€Œå¿ƒéˆæœƒæ‰€ã€æ‰¾å›æ„›çš„èƒ½åŠ›ã€‚",
            contentID: "æ‚Ÿ-01-s", 
            pageName: "4. å¿ƒéˆæœƒæ‰€",
            toolURL: ""
        }
        // ... æ­¤è™•å¯æ“´å……è‡³ 12 é …æˆ–æ›´å¤šï¼Œçµæ§‹å®Œå…¨å°æ‡‰è©¦ç®—è¡¨
    ];

    /* ----------------------------------------------------------------
       2. æ™ºå¤šæ˜Ÿæ ¸å¿ƒåµæ¸¬é‚è¼¯
       ---------------------------------------------------------------- */
    function triggerMastermind() {
        const input = document.getElementById('userInput').value.trim();
        const panel = document.getElementById('response-panel');
        const voice = document.getElementById('angelVoice');
        const navBtn = document.getElementById('navBtn');
        const toolBtn = document.getElementById('toolBtn');
        const envelope = document.getElementById('envelope-anim');

        if (!input) { alert("ç¬‘é•·åœ¨è½ï¼Œè«‹è·Ÿæˆ‘èªªèªªæ‚¨çš„ç…©æƒ±..."); return; }

        // æ¨¡æ“¬ API æª¢ç´¢éç¨‹ (åŒ…å«é—œéµå­—éæ¿¾)
        const match = mockSheetAPI.find(row => 
            row.keywords.split(',').some(key => input.includes(key.trim()))
        );

        panel.style.display = "block";
        envelope.style.display = "none"; // é‡ç½®å‹•ç•«
        toolBtn.style.display = "none"; // é‡ç½®å·¥å…·éˆ•

        if (match) {
            voice.innerText = match.response;
            navBtn.innerText = `ğŸ¬ å‰å¾€ ${match.pageName} (å°‹æ‰¾ ID: ${match.contentID})`;
            navBtn.setAttribute('data-target', match.contentID);

            // å¦‚æœ E æ¬„æœ‰å·¥å…·é€£çµï¼Œå•Ÿå‹• PWA é ˜å–é‚è¼¯
            if (match.toolURL) {
                envelope.style.display = "block";
                setTimeout(() => {
                    envelope.style.display = "none";
                    toolBtn.style.display = "block";
                    toolBtn.onclick = () => window.open(match.toolURL, '_blank');
                }, 1500); // æ¨¡æ“¬ 1.5 ç§’çš„ã€Œæº–å‚™å·¥å…·ã€å„€å¼æ„Ÿå‹•ç•«
            }
        } else {
            voice.innerText = "å°å¤©ä½¿ç¬‘é•·æ­£åœ¨æº«æŸ”è†è½...é›–ç„¶å­—å…¸é‚„æ²’å®Œå…¨å°ä¸Šï¼Œä½†è«‹å…ˆå›é¦–é è®€è®€ã€å¹¸ç¦ç¶“ã€‘ï¼Œé‚£æ˜¯æ‰€æœ‰å•é¡Œçš„è§£è—¥ã€‚";
            navBtn.innerText = "ğŸ¬ éš¨æ©Ÿåƒè§€å±•å»³";
        }
    }

    /* ----------------------------------------------------------------
       3. å°èˆªè·³è½‰å‡½æ•¸
       ---------------------------------------------------------------- */
    function goToSutra() {
        alert("å„€å¼å•Ÿå‹•ï¼šæ­£åœ¨ç‚ºæ‚¨å±•é–‹ã€Šæ•™é¤Šå¹¸ç¦ç¶“ã€‹å·è»¸...");
        // å¯¦ä½œï¼šè·³è½‰å› Index.html ä¸¦è§¸ç™¼é¤¨è—å±•é–‹ JS
    }

    function goToGallery() {
        const id = document.getElementById('navBtn').getAttribute('data-target');
        alert(`å°èˆªå•Ÿå‹•ï¼šå³å°‡å¸¶æ‚¨å‰å¾€ç›®æ¨™å±•è¦½ï¼Œå®šä½ ID: ${id}`);
        // å¯¦ä½œï¼šæ›é ä¸¦è‡ªå‹•æ»¾å‹•è‡³å°æ‡‰å…ƒä»¶
    }

    function downloadTool() {
        alert("ğŸŒ¸ å¹¸ç¦å·¥å…·å·²æº–å‚™å°±ç·’ï¼Œæ­£åœ¨ä¸‹è¼‰è‡³æ‚¨çš„ PWA è£ç½®...");
    }
</script>

</body>
</html>

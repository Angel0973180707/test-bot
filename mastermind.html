<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¹¸ç¦æ™ºå¤šæ˜Ÿ</title>
    <style>
        :root { 
            --angel-pink: #ffb6c1; 
            --deep-pink: #d63384; 
            --soft-bg: #fff5f7; 
            --think-blue: #007bff; 
            --soft-blue: #e3f2fd; 
            --kids-green: #4caf50;
            --gold-border: #d4af37;
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: "Microsoft JhengHei", sans-serif; 
            background-color: var(--soft-bg); 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            overflow-x: hidden;
        }
        
        .container { 
            width: 100%; 
            max-width: 480px; 
            background: white; 
            min-height: 100vh; 
            box-shadow: 0 0 20px rgba(0,0,0,0.05); 
            display: flex;
            flex-direction: column;
        }

        /* å°è¦½æ¨™ç±¤ */
        .nav-tabs { 
            display: flex; 
            background: white; 
            border-bottom: 2px solid #f0f0f0; 
            position: sticky; 
            top: 0; 
            z-index: 1000;
        }
        .nav-tab { 
            flex: 1; 
            padding: 12px 2px; 
            text-align: center; 
            font-size: clamp(0.7rem, 3.2vw, 0.88rem); 
            letter-spacing: -0.5px;
            color: #999; 
            cursor: pointer; 
            border-bottom: 4px solid transparent; 
            transition: 0.3s;
            font-weight: bold;
            white-space: nowrap; 
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .nav-tab.active { color: var(--deep-pink); border-bottom-color: var(--deep-pink); background: rgba(214, 51, 132, 0.05); }

        /* æ¨™é¡Œå€å¡Š */
        .header-section { 
            padding: 25px 20px 15px; 
            text-align: center; 
            background: linear-gradient(to bottom, #fff0f3, #ffffff);
        }
        .header-btn-box {
            display: inline-block;
            background: white;
            padding: 15px 25px;
            border-radius: 20px;
            border: 2px solid var(--angel-pink);
            border-bottom: 6px solid var(--angel-pink); 
            box-shadow: 0 4px 15px rgba(214,51,132,0.1);
            margin-top: 5px;
            max-width: 90%;
        }
        .ambassador-mini { 
            width: 80px; height: 80px; 
            border-radius: 50%; 
            border: 4px solid white; 
            box-shadow: 0 4px 10px rgba(214,51,132,0.15); 
            margin: -50px auto 10px; 
            overflow: hidden; 
            background: #eee;
        }
        .ambassador-mini img { width: 100%; height: 100%; object-fit: cover; }
        
        .header-text h2 { margin: 0; color: var(--deep-pink); font-size: 1.25rem; letter-spacing: 1px; white-space: nowrap; }
        .header-text p { margin: 5px 0 0; color: #888; font-size: 0.85rem; font-weight: bold; white-space: nowrap; }
        
        .main-content { padding: 0 15px 30px; flex: 1; }
        .module-content { display: none; animation: fadeIn 0.4s; }
        .module-content.active { display: block; }

        /* æœå°‹åˆ— */
        .action-row { display: flex; gap: 8px; margin: 20px 0; align-items: stretch; }
        .search-group { 
            display: flex; 
            background: #fff; 
            border: 2px solid var(--angel-pink); 
            border-radius: 50px; 
            padding: 4px; 
            flex: 1; 
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
        .search-group input { flex: 1; border: none; padding: 6px 15px; border-radius: 50px; outline: none; font-size: 1rem; width: 60px; }
        
        .ask-btn { 
            background: var(--deep-pink); color: white; border: none; padding: 0 18px; border-radius: 50px; 
            cursor: pointer; font-weight: bold; font-size: 0.9rem; 
            border-bottom: 4px solid #a61b5a; transition: 0.1s;
            white-space: nowrap;
        }
        .ask-btn:active { transform: translateY(2px); border-bottom-width: 2px; }

        /* é–‹å¿ƒæŒ‰éˆ•å½ˆå‹•æ•ˆæœ */
        .happy-btn { 
            background: #fbc02d; border: none; padding: 0 12px; border-radius: 50px; 
            cursor: pointer; font-weight: bold; color: #5d4037; font-size: 0.85rem; white-space: nowrap; 
            border-bottom: 4px solid #c49000; transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .happy-btn:hover { transform: scale(1.05); }
        .happy-btn:active { transform: scale(0.9) translateY(2px); }

        .category-title { font-size: 0.9rem; color: var(--deep-pink); margin: 25px 0 10px; font-weight: bold; border-left: 5px solid var(--deep-pink); padding-left: 10px; white-space: nowrap; }
        
        .suggest-tags { display: flex; flex-wrap: wrap; gap: 10px; }
        .tag { 
            background: white; border: 1.5px solid var(--angel-pink); border-bottom: 4px solid var(--angel-pink); 
            color: var(--deep-pink); padding: 7px 12px; border-radius: 12px; font-size: 0.82rem; 
            cursor: pointer; font-weight: bold; transition: 0.1s;
            text-align: center;
            white-space: nowrap;
        }
        .tag:active { transform: translateY(2px); border-bottom-width: 1.5px; }
        
        /* èƒ½é‡å¡é¸æ“‡ */
        .option-label { font-size: 0.9rem; color: #666; font-weight: bold; margin: 20px 0 10px; padding-left: 5px; white-space: nowrap; }
        .grid-options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .opt-card { 
            background: white; border: 2px solid #eee; border-bottom: 5px solid #eee;
            padding: 15px 4px; border-radius: 15px; text-align: center; 
            cursor: pointer; transition: 0.2s; 
            font-size: clamp(0.75rem, 3.8vw, 0.92rem); 
            letter-spacing: -0.2px;
            white-space: nowrap; 
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .opt-card.selected { 
            border-color: var(--deep-pink); border-bottom-color: #a61b5a;
            background: #fff9fa; color: var(--deep-pink); font-weight: bold; 
        }

        #loading { 
            display: none; 
            text-align: center; 
            margin: 30px auto; 
            color: var(--deep-pink); 
            font-weight: bold; 
            font-size: 0.95rem;
            white-space: nowrap;
        }

        #response-panel { display: none; margin-top: 15px; }
        .angel-talk { 
            background: #fff; padding: 18px; border-radius: 20px; 
            border: 1.5px solid #ffeef1; border-bottom: 5px solid #ffeef1;
            line-height: 1.7; color: #333; font-size: 0.95rem; white-space: pre-wrap; 
            margin-bottom: 12px; text-align: justify; 
        }
        .think-box { 
            background: var(--soft-blue); border-radius: 15px; padding: 15px; 
            color: #1565c0; border: 1.5px solid #bbdefb; border-bottom: 4px solid #bbdefb;
            font-size: 0.88rem; 
        }

        .url-button { 
            display: block; width: 100%; text-align: center; color: white !important; 
            padding: 14px 10px; border-radius: 15px; text-decoration: none !important; 
            font-weight: bold; margin: 15px 0; font-size: 1rem; 
            border-bottom: 5px solid rgba(0,0,0,0.2); transition: 0.1s;
            white-space: nowrap;
        }
        .btn-tool { background-color: var(--think-blue) !important; } 
        .btn-vid { background-color: var(--deep-pink) !important; }  

        /* èƒ½é‡å¡çµæœ */
        #result-area { display: none; padding: 20px 0; text-align: center; }
        .business-card { 
            width: 100%; 
            background: linear-gradient(135deg, #ffffff 0%, #fffdf8 100%); 
            border-radius: 28px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.08); 
            padding: 35px 20px; 
            border: 1.5px solid #f1e7c5; 
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .res-main-title { 
            color: var(--deep-pink); font-size: 1.15rem; font-weight: bold; 
            border-bottom: 2px solid #f9f2d8; padding-bottom: 12px; 
            margin-bottom: 25px; white-space: nowrap; 
        }
        .card-label { 
            font-size: 0.7rem; color: #bbb; text-transform: uppercase; 
            letter-spacing: 0.5px; font-weight: bold; white-space: nowrap; 
            margin-top: 15px;
        }
        .card-val { 
            font-size: clamp(1.1rem, 5.5vw, 1.4rem); 
            letter-spacing: -0.5px;
            color: #333; font-weight: bold; 
            margin: 8px 0 12px; white-space: nowrap; 
            display: flex; justify-content: center; align-items: center;
        }
        .card-ritual { 
            background: #fff; padding: 18px; border-radius: 18px; 
            border: 1px dashed var(--angel-pink); 
            font-size: 1.05rem; color: #444; margin: 15px 0; 
            line-height: 1.6; text-align: center;
            word-break: keep-all;
        }
        
        .action-btn { 
            width: 100%; padding: 16px; border-radius: 50px; border: none; color: white; 
            font-weight: bold; font-size: 1.05rem; margin-top: 30px; cursor: pointer; 
            border-bottom: 5px solid rgba(0,0,0,0.2); transition: 0.1s;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
<div class="container">
    <nav class="nav-tabs">
        <div class="nav-tab active" id="tab-ask" onclick="switchModule('ask')">ğŸ§  æ™ºå¤šæ˜Ÿ</div>
        <div class="nav-tab" id="tab-parent" onclick="switchModule('parent')">ğŸ’ å®¶é•·èƒ½é‡</div>
        <div class="nav-tab" id="tab-kids" onclick="switchModule('kids')">âœ¨ å¯¶è²èƒ½é‡</div>
    </nav>

    <div class="header-section">
        <div class="header-btn-box">
            <div class="ambassador-mini"><img src="1769671255343.jpg" onerror="this.src='https://via.placeholder.com/80?text=Logo'"></div>
            <div class="header-text">
                <h2 id="module-title">å¹¸ç¦æ™ºå¤šæ˜Ÿ</h2>
                <p id="module-desc">è®“æˆ‘å€‘ä¸€èµ·ç‚ºå¹¸ç¦å……é›»</p>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div id="module-ask" class="module-content active">
            <div class="action-row">
                <div class="search-group"><input type="text" id="userInput" placeholder="è¼¸å…¥æ•™é¤Šé›£é¡Œ...">
                <button class="ask-btn" onclick="fetchFromCloud(false)">è©¢å•</button></div>
                <button class="happy-btn" onclick="fetchFromCloud(true)">ğŸŒ» é–‹å¿ƒ</button>
            </div>

            <div class="category-title">âœ¨ å¤§äººç¯‡ï¼šæƒ…ç·’ç…§é¡§èˆ‡ç©©å®š</div>
            <div class="suggest-tags">
                <div class="tag" onclick="quickSearch('æ„Ÿæ©ç§‘å­¸')">#æ„Ÿæ©ç§‘å­¸</div>
                <div class="tag" onclick="quickSearch('æ•™é¤Šè¡å‹•')">#æ•™é¤Šè¡å‹•</div>
                <div class="tag" onclick="quickSearch('æ•™é¤ŠæŒ«æŠ˜')">#æ•™é¤ŠæŒ«æŠ˜</div>
                <div class="tag" onclick="quickSearch('æ•™é¤Šç„¦æ…®')">#æ•™é¤Šç„¦æ…®</div>
                <div class="tag" onclick="quickSearch('æ•™é¤Šè¡çª')">#æ•™é¤Šè¡çª</div>
                <div class="tag" onclick="quickSearch('é—œä¿‚ç–é›¢')">#é—œä¿‚ç–é›¢</div>
            </div>

            <div class="category-title">âœ¨ æ•™é¤Šç¯‡ï¼šå­©å­è¡Œç‚ºèˆ‡æºé€š</div>
            <div class="suggest-tags">
                <div class="tag" onclick="quickSearch('å­©å­ä¸å°ˆå¿ƒ')">#å­©å­ä¸å°ˆå¿ƒ</div>
                <div class="tag" onclick="quickSearch('å­©å­è¡çª')">#å­©å­è¡çª</div>
                <div class="tag" onclick="quickSearch('é ‚å˜´')">#å­©å­é ‚å˜´</div>
                <div class="tag" onclick="quickSearch('æ‹’å­¸')">#å­©å­æ‹’å­¸</div>
                <div class="tag" onclick="quickSearch('æŠ±æ€¨')">#å­©å­æŠ±æ€¨</div>
                <div class="tag" onclick="quickSearch('ä¸åˆç¾¤')">#å­©å­ä¸åˆç¾¤</div>
            </div>

            <div id="loading">âœ¨ æ™ºå¤šæ˜Ÿæ­£åœ¨èª¿é…å¹¸ç¦é…æ–¹...</div>
            
            <div id="response-panel">
                <div class="angel-talk" id="guidanceBox"></div>
                <div id="thinkArea" class="think-box"><b>ğŸ’¡ æ™ºå¤šæ˜Ÿçš„è½‰å¿µæé»ï¼š</b><br><span id="reflectionBox"></span></div>
            </div>
        </div>

        <div id="module-parent" class="module-content">
            <div class="option-label">ğŸ’ æ­¤åˆ»çš„å¿ƒæƒ…ç‹€æ…‹</div>
            <div class="grid-options">
                <div class="opt-card" onclick="selectCardOpt('pState', this, 'ç„¦æ…®æ··äº‚')">ğŸ˜µ ç„¦æ…®æ··äº‚</div>
                <div class="opt-card" onclick="selectCardOpt('pState', this, 'ç–²æ†Šç„¡åŠ›')">ğŸ¥± ç–²æ†Šç„¡åŠ›</div>
                <div class="opt-card" onclick="selectCardOpt('pState', this, 'è‡ªè²¬å…§ç–š')">ğŸ˜” è‡ªè²¬å…§ç–š</div>
                <div class="opt-card" onclick="selectCardOpt('pState', this, 'æ†¤æ€’è¡å‹•')">ğŸŒ‹ æ†¤æ€’è¡å‹•</div>
            </div>
            <div class="option-label">ğŸ’ æ¸´æœ›æ³¨å…¥çš„èƒ½é‡</div>
            <div class="grid-options">
                <div class="opt-card" onclick="selectCardOpt('pEnergy', this, 'æº«æŸ”å¹³éœ')">ğŸŒ¿ æº«æŸ”å¹³éœ</div>
                <div class="opt-card" onclick="selectCardOpt('pEnergy', this, 'å …å®šåŠ›é‡')">ğŸ¦ å …å®šåŠ›é‡</div>
                <div class="opt-card" onclick="selectCardOpt('pEnergy', this, 'æ„›èˆ‡é—œæ‡·')">ğŸ’– æ„›èˆ‡é—œæ‡·</div>
                <div class="opt-card" onclick="selectCardOpt('pEnergy', this, 'æ¥ç´å¯¬å®¹')">ğŸ‘ æ¥ç´å¯¬å®¹</div>
            </div>
            <button class="action-btn" style="background:var(--deep-pink);" onclick="showEnergyCard('parent')">é ˜å–å®¶é•·å®ˆè­·å¡</button>
        </div>

        <div id="module-kids" class="module-content">
            <div class="option-label">âœ¨ å¯¶è²çš„å°æƒ…ç·’</div>
            <div class="grid-options">
                <div class="opt-card" onclick="selectCardOpt('kState', this, 'ç«å†’ä¸‰ä¸ˆ')">ğŸ˜¡ ç«å†’ä¸‰ä¸ˆ</div>
                <div class="opt-card" onclick="selectCardOpt('kState', this, 'æ‚¶æ‚¶ä¸æ¨‚')">ğŸ˜¢ æ‚¶æ‚¶ä¸æ¨‚</div>
                <div class="opt-card" onclick="selectCardOpt('kState', this, 'ç·Šå¼µæ€•æ€•')">ğŸ˜¨ ç·Šå¼µæ€•æ€•</div>
                <div class="opt-card" onclick="selectCardOpt('kState', this, 'èª¿çš®å¥½å‹•')">ğŸ¤ª èª¿çš®å¥½å‹•</div>
            </div>
            <div class="option-label">âœ¨ å•Ÿå‹•é­”æ³•èƒ½é‡</div>
            <div class="grid-options">
                <div class="opt-card" onclick="selectCardOpt('kEnergy', this, 'å†·éœé­”æ³•')">â„ï¸ å†·éœé­”æ³•</div>
                <div class="opt-card" onclick="selectCardOpt('kEnergy', this, 'å‹‡æ•¢åŠ›æ°£')">ğŸ›¡ï¸ å‹‡æ•¢åŠ›æ°£</div>
                <div class="opt-card" onclick="selectCardOpt('kEnergy', this, 'å¿«æ¨‚æ°£çƒ')">ğŸˆ å¿«æ¨‚æ°£çƒ</div>
                <div class="opt-card" onclick="selectCardOpt('kEnergy', this, 'å°ˆå¿ƒç¨®å­')">ğŸ¯ å°ˆå¿ƒç¨®å­</div>
            </div>
            <button class="action-btn" style="background:var(--kids-green);" onclick="showEnergyCard('kids')">å•Ÿå‹•å¯¶è²èƒ½é‡å¡</button>
        </div>

        <div id="result-area">
            <div class="business-card">
                <div class="res-main-title" id="res-title">èƒ½é‡å®ˆè­·å¡</div>
                
                <div class="card-label">STATE / å¿ƒæƒ…ç‹€æ…‹</div>
                <div class="card-val" id="res-state">-</div>
                
                <div class="card-label">ENERGY / æ ¸å¿ƒèƒ½é‡</div>
                <div class="card-val" style="color:var(--deep-pink);" id="res-energy">-</div>
                
                <div class="card-label">RITUAL / å¹¸ç¦å„€å¼</div>
                <div class="card-ritual" id="res-ritual">-</div>
                
                <div style="font-size:0.95rem; color:#555; font-style:italic; margin-top:25px; line-height:1.5; font-weight:500;" id="res-quote"></div>
                <div style="margin-top:35px; font-size:0.65rem; color:#ccc; letter-spacing:2px; white-space:nowrap;">@å¤©ä½¿ç¬‘é•·å¹¸ç¦æ•™é¤Šæ¦‚å¿µé¤¨</div>
            </div>
            <button onclick="switchModule('ask')" style="background:none; border:none; color:#bbb; text-decoration:underline; font-size:0.85rem; cursor:pointer;">â† è¿”å›æ™ºå¤šæ˜Ÿ</button>
        </div>
    </div>
</div>

<script>
    const API_URL = "https://script.google.com/macros/s/AKfycby2XB5lJ1E72dO25yNtNpI9VOOGJkJXJfCbtCxT19oU1Be6E3RaUP4zzjsYkUjVGLNT/exec";
    
    const rituals = {
        'æº«æŸ”å¹³éœ': 'æ·±å¸æ°£ 4 ç§’ï¼Œæ†‹æ°£ 4 ç§’ï¼Œåæ°£ 8 ç§’ã€‚', 
        'å …å®šåŠ›é‡': 'æŒºç›´è„Šæ¤ï¼Œæƒ³åƒè…³åº•é•·å‡ºç©©å®šçš„æ ¹ã€‚',
        'æ„›èˆ‡é—œæ‡·': 'æ‰‹æ”¾èƒ¸å£ï¼Œè¼•è²å°è‡ªå·±èªªï¼šè¾›è‹¦äº†ã€‚', 
        'æ¥ç´å¯¬å®¹': 'å±•é–‹é›™è‡‚ï¼Œæ¥ç´æ‰€æœ‰æƒ…ç·’ã€‚',
        'å†·éœé­”æ³•': 'å°è‘—æ‰‹å¿ƒå¹æ°£ï¼ŒæŠŠå¿ƒä¸­çš„ç«å¹æ¶¼ã€‚', 
        'å‹‡æ•¢åŠ›æ°£': 'ç”¨åŠ›æ¡æ‹³ 3 ç§’å†æ”¾é–‹ï¼Œæ„Ÿå—åŠ›é‡ã€‚',
        'å¿«æ¨‚æ°£çƒ': 'åŸåœ°è¼•è·³ä¸‰æ¬¡ï¼Œæƒ³åƒèº«é«”è®Šè¼•ç›ˆã€‚', 
        'å°ˆå¿ƒç¨®å­': 'é£ŸæŒ‡è¼•é»çœ‰å¿ƒï¼Œè®“å°ˆå¿ƒå›ä¾†ã€‚'
    };

    let selections = { pState:'', pEnergy:'', kState:'', kEnergy:'' };

    function switchModule(mod) {
        document.querySelectorAll('.module-content').forEach(m => m.classList.remove('active'));
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        document.getElementById('result-area').style.display = 'none';
        
        document.getElementById(`module-${mod}`).classList.add('active');
        document.getElementById(`tab-${mod==='ask'?'ask':mod}`).classList.add('active');
        
        const titles = { 'ask': 'å¹¸ç¦æ™ºå¤šæ˜Ÿ', 'parent': 'å®¶é•·èƒ½é‡å¡', 'kids': 'å¯¶è²èƒ½é‡å¡' };
        const descs = { 
            'ask': 'è®“æˆ‘å€‘ä¸€èµ·ç‚ºå¹¸ç¦å……é›»', 
            'parent': '<span style="white-space:nowrap; font-size:0.72rem; letter-spacing:-0.2px;">å…ˆç…§é¡§è‡ªå·±ï¼Œæ‰æœ‰åŠ›æ°£æ„›å­©å­</span>', 
            'kids': 'é™ªå­©å­ä¸€èµ·ç·´ç¿’æƒ…ç·’é­”æ³•' 
        };
        
        document.getElementById('module-title').innerText = titles[mod];
        document.getElementById('module-desc').innerHTML = descs[mod];
    }

    function selectCardOpt(type, el, val) {
        el.parentElement.querySelectorAll('.opt-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        selections[type] = val;
    }

    function showEnergyCard(mode) {
        const isP = mode === 'parent';
        const s = isP ? selections.pState : selections.kState;
        const e = isP ? selections.pEnergy : selections.kEnergy;
        if(!s || !e) return;
        
        document.getElementById('res-title').innerText = isP ? "ğŸ’ å®¶é•·å°ˆå±¬å®ˆè­·å¡" : "âœ¨ å¯¶è²æƒ…ç·’é­”æ³•å¡";
        document.getElementById('res-state').innerText = s;
        document.getElementById('res-energy').innerText = e;
        document.getElementById('res-ritual').innerText = rituals[e] || "æ·±å‘¼å¸ä¸‰æ¬¡ã€‚";
        document.getElementById('res-quote').innerText = isP ? "ä¸–ç•Œå› æˆ‘ç”œç¾ï¼Œæ„›è®“åŠ›é‡ç™¼ç”Ÿï¼" : "æˆ‘æœ‰è¶…ç´šé­”æ³•ï¼Œè®“æˆ‘å¯ä»¥åšåˆ°ï¼";
        
        document.querySelectorAll('.module-content').forEach(m => m.classList.remove('active'));
        document.getElementById('result-area').style.display = 'block';
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function quickSearch(word) { document.getElementById('userInput').value = word; fetchFromCloud(false); }
    
    async function fetchFromCloud(isJoke) {
        const loading = document.getElementById('loading');
        const panel = document.getElementById('response-panel');
        const gBox = document.getElementById('guidanceBox');
        const rBox = document.getElementById('reflectionBox');
        const inputVal = document.getElementById('userInput').value;
        
        loading.style.display = "block"; panel.style.display = "none";
        
        if (isJoke) {
            loading.style.display = "none"; panel.style.display = "block";
            const jokes = [
                "æ‰€è¬‚çš„ã€å„ªé›…è‚²å…’ã€ï¼Œå°±æ˜¯ä½ åœ¨å¿ƒè£¡å·²ç¶“æŠŠå­©å­åŠèµ·ä¾†æ‰“äº†å…©ç™¾æ¬¡ï¼Œä½†è‡‰ä¸Šä¾ç„¶ä¿æŒå¾®ç¬‘ã€‚",
                "è‚²å…’å°±æ˜¯ä¸€å ´é•·é” 20 å¹´çš„ä¿®è¡Œï¼Œå­©å­æ˜¯ä½ çš„æ¥­éšœï¼Œè€å…¬æ˜¯ä½ çš„è€ƒé©—ã€‚",
                "å¦‚æœä½ ç™¼ç¾å­©å­çªç„¶å®‰éœï¼Œè¶•å¿«æª¢æŸ¥éµç›¤æ˜¯ä¸æ˜¯å°‘äº†å¥½å¹¾å€‹éµã€‚",
                "ç•¶åª½å¾Œæœ€æƒ³å¿µçš„åœ°æ–¹ä¸æ˜¯ç™¾è²¨å…¬å¸ï¼Œè€Œæ˜¯æ²’æœ‰äººåœ¨é–€å£å–Šã€åª½ï½ã€çš„å»æ‰€ã€‚",
                "æ•™é¤Šæ›¸èªªè¦çµ¦å­©å­é¸æ“‡æ¬Šï¼šã€ä½ æ˜¯è¦ç¾åœ¨ä¹–ä¹–ç¡è¦ºï¼Œé‚„æ˜¯è¦ç­‰æˆ‘ç™¼ç«å†ç¡è¦ºï¼Ÿã€",
                "æ‰€è¬‚çˆ¶æ„›å¦‚å±±ï¼Œæ„æ€å°±æ˜¯ä¸ç®¡å®¶è£¡ç™¼ç”Ÿä»€éº¼äº‹ï¼Œçˆ¸çˆ¸éƒ½åƒä¸€åº§å±±ä¸€æ¨£ï¼Œååœ¨æ²™ç™¼ä¸Šä¸€å‹•ä¸å‹•ã€‚",
                "å­©å­æ˜¯çœ‹è‘—çˆ¶æ¯çš„èƒŒå½±é•·å¤§çš„ï¼Œä½†å¦‚æœä½ ä¸€ç›´åœ¨ç©æ‰‹æ©Ÿï¼Œä»–çœ‹çš„æ˜¯ä½ çš„ä½é ­å§¿å‹¢ã€‚",
                "ç‚ºä»€éº¼å­©å­ç¸½åœ¨ç¡å‰çªç„¶æƒ³è¨è«–äººç”Ÿå“²å­¸ï¼Ÿå› ç‚ºä»–å€‘ç™¼ç¾é€™æ¨£å¯ä»¥æ™šç¡ 10 åˆ†é˜ã€‚",
                "ç”Ÿå­©å­å‰ï¼Œä»¥ç‚ºå®¶è£¡æ˜¯æ–‡é’é¢¨ï¼›ç”Ÿå¾Œï¼Œè®Šæˆäº†å‘½æ¡ˆç¾å ´é¢¨ï¼Œåˆ°è™•æ˜¯æ¨‚é«˜æ®˜è‚¢ã€‚",
                "æœ‰ä¸€ç¨®é¤“ï¼Œæ˜¯å¥¶å¥¶è¦ºå¾—ä½ é¤“ï¼›æœ‰ä¸€ç¨®å†·ï¼Œæ˜¯åª½åª½è¦ºå¾—ä½ å†·ã€‚",
                "è½èªªç¡çœ å°ç™¼è‚²å¾ˆé‡è¦ï¼Œä½†æˆ‘æ›´è¦ºå¾—ç¡çœ å°æˆ‘çš„è„¾æ°£æ§åˆ¶å¾ˆé‡è¦ã€‚",
                "æ•™å­©å­å¯«ä½œæ¥­çš„éç¨‹ï¼Œæœ¬è³ªä¸Šæ˜¯ä¸€å ´é—œæ–¼å¿ƒè‚Œæ¢—å¡çš„é æ¼”ã€‚",
                "æ‰€è¬‚ã€æ­²æœˆéœå¥½ã€ï¼ŒæŒ‡çš„æ˜¯å­©å­éƒ½å»ä¸Šå­¸çš„é‚£ 8 å€‹å°æ™‚ã€‚",
                "ç•¶ä½ é–‹å§‹è¦ºå¾—å­©å­å¾ˆå¯æ„›æ™‚ï¼Œé€šå¸¸æ˜¯å› ç‚ºä»–å·²ç¶“ç¡è‘—äº†ã€‚",
                "æ¸›è‚¥å¤±æ•—çš„åŸå› ï¼šä¸æƒ³æµªè²»å­©å­æ²’åƒå®Œçš„é›å¡Šã€è–¯æ¢ã€æŠ«è–©ã€‚",
                "è‚²å…’æœ€å¤§çš„è¬Šè¨€ï¼šã€ç­‰ä½ é•·å¤§å¾Œï¼Œæˆ‘å°±è¼•é¬†äº†ã€‚ã€",
                "å­©å­å°±åƒ WiFiï¼Œæœ‰çš„è¨Šè™Ÿå¼·ï¼Œæœ‰çš„è¨Šè™Ÿå¼±ï¼Œä½†åªè¦æ–·ç·šï¼Œå…¨å®¶äººéƒ½æœƒå´©æ½°ã€‚",
                "å¸¶å­©å­å‡ºé–€æ—…éŠï¼Œä¸å«æ—…éŠï¼Œé‚£å«ã€æ›å€‹åœ°æ–¹å¸¶å°å­©ã€ã€‚",
                "å®¶é•·èšæœƒåªæœ‰ä¸€å€‹ä¸»é¡Œï¼šæ¯”æ…˜ã€‚æ¯”èª°çš„å­©å­æ›´æ—©èµ·ï¼Œæ¯”èª°çš„è‚æ›´ç´¯ã€‚",
                "æ¯å¤©æ—©ä¸Šèµ·åºŠæ”¯æ’æˆ‘çš„å‹•åŠ›ï¼Œä¸æ˜¯å¤¢æƒ³ï¼Œæ˜¯å­©å­åœ¨åºŠé ­è¹¦è·³çš„è²éŸ³ã€‚"
            ];
            gBox.innerHTML = "ã€ğŸ”¥ æ•™é¤Šå¤§å¯¦è©±ã€‘\n\n" + jokes[Math.floor(Math.random() * jokes.length)];
            rBox.innerText = "ç¬‘ä¸€ç¬‘ï¼Œå¹¸ç¦å°±ä¾†äº†ï¼";
            return;
        }

        try {
            const res = await fetch(`${API_URL}?q=${encodeURIComponent(inputVal)}&cache=${Date.now()}`);
            const result = await res.json();
            const data = result.data;
            loading.style.display = "none";
            if (data) {
                panel.style.display = "block";
                let lines = (data.guidance || "").split('\n');
                let finalHtml = "";
                lines.forEach((line, i) => {
                    if (line.includes('https://')) {
                        let urlMatch = line.match(/https?:\/\/[^\s]+/);
                        if (urlMatch) {
                            let url = urlMatch[0];
                            let isTool = line.includes('å·¥å…·') || (i > 0 && lines[i-1].includes('å·¥å…·'));
                            finalHtml += `<a href="${url}" target="_blank" class="url-button ${isTool?'btn-tool':'btn-vid'}">${isTool?'ğŸ› ï¸ é»æˆ‘é ˜å–å¹¸ç¦å·¥å…·':'ğŸ¬ æ‰“é–‹å¹¸ç¦èª¿å‘³åŒ…'}</a>`;
                        }
                    } else if(line.trim() !== "") {
                        finalHtml += line + "<br>";
                    }
                });
                gBox.innerHTML = finalHtml;
                rBox.innerText = data.reflection || "æ‚¨çš„ç”¨å¿ƒæ˜¯å­©å­çš„ç¦æ°£ï¼";
            }
        } catch (e) { loading.innerText = "âŒ å¹¸ç¦å¤§è…¦é€£ç·šä¸­ï¼Œè«‹ç¨å€™å†è©¦ä¸€æ¬¡ï¼"; }
    }
</script>
</body>
</html>

